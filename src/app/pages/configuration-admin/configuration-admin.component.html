<div class="container-semi">
  <div class="card">
    <div class="card-header">
      Configuracion de Empresa
    </div>
    <div class="card-body">
      <div class="el-steps el-steps--horizontal">

        <div *ngFor="let item of stepItems" class="el-step is-horizontal {{item.flexClass}}" [ngStyle]="item.style">
          <div class="el-step__head {{item.status}}">
            <div class="el-step__line" style="margin-right: 0px;"><i class="el-step__line-inner"
                style="transition-delay: 0ms; border-width: 0px; width: 0%;"></i></div>
            <div class="el-step__icon is-text poninter" (click)="StepSelect(item.number)">
              <div class="el-step__icon-inner">{{item.number}}</div>
            </div>
          </div>
          <div class="el-step__main">
            <div class="el-step__title {{item.status}}">{{item.title}}</div>
            <div class="el-step__description {{item.status}}"></div>
          </div>
        </div>
      </div>
      <br> <br>

      <div class="row" *ngIf="Step===1">
        <form autocomplete="off" role="form" [formGroup]='configEmployeForm' (ngSubmit)="onConfigEmploye()">
          <div class="col-md-12">
            <div class="card box-card is-always-shadow">
              <div class="card-header">
                <div class="clearfix">
                  <span>Datos Generales</span>
                </div>
              </div>
              <div class="card-body">

                <div class="form-body">
                  <div class="row">
                    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4">
                      <div class="form-group">
                        <label style="width: 100%">
                          Identificacion: <span class="required">*</span>
                          <input #txtIdenty (blur)="getDiv(txtIdenty.value)" type="number" class="form-control input-xm"
                            [(ngModel)]="employeSettingsSelected.identification_number" name="identification_number"
                            formControlName="identification_number">
                        </label>
                      </div>
                    </div>
                    <div class="col-12 col-sm-2 col-md-2 col-lg-2 col-xl-2">
                      <div class="form-group">
                        <label style="width: 100%">
                          Dv: <span class="required">*</span>
                          <input type="number" min="0" max="9" [(ngModel)]="employeSettingsSelected.dv"
                            class="form-control input-xm" formControlName="dv">
                        </label>
                      </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                      <div class="form-group">
                        <label style="width: 100%">
                          Empresa: <span class="required">*</span>
                          <input type="text" class="form-control input-xm uppercase"
                            [(ngModel)]="employeSettingsSelected.business_name" name="business_name"
                            formControlName="business_name">
                        </label>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                      <div class="form-group">
                        <label style="width: 100%">
                          Registro Mercantil: <span class="required">*</span>
                          <input type="text" class="form-control input-xm"
                            [(ngModel)]="employeSettingsSelected.merchant_registration" name="merchant_registration"
                            formControlName="merchant_registration">
                        </label>
                      </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                      <div class="form-group">
                        <label style="width: 100%">
                          Direccion: <span class="required">*</span>
                          <input type="text" class="form-control input-xm uppercase"
                            [(ngModel)]="employeSettingsSelected.address" name="address" formControlName="address">
                        </label>
                      </div>
                    </div>
                    <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                      <div class="form-group">
                        <label style="width: 100%">
                          Telefono: <span class="required">*</span>
                          <input type="number" class="form-control input-xm" [(ngModel)]="employeSettingsSelected.phone"
                            name="phone" formControlName="phone">
                        </label>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4">
                      <div class="form-group">
                        <label style="width: 100%">
                          Correo Electronico: <span class="required">*</span>
                          <input type="email" class="form-control input-xm lowercase"
                            [(ngModel)]="employeSettingsSelected.email" name="email" formControlName="email">
                        </label>
                      </div>
                    </div>
                    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4">
                      <div class="form-group">
                        <label style="width: 100%">
                          Tipo de identificación: <span class="required">*</span>
                          <utils-autocomplete #autoIdentification
                            [data]="this.settingsCompany_.type_document_identification"
                            [itemTemplate]="itemTemplatetype_identification" [searchKeyword]="keyword_identification"
                            [notFoundTemplate]="notFoundTemplatetype_identification"
                            placeholder="Digite el tipo de identificación" [debounceTime]="50" [isLoading]="false"
                            (onFocusItem)='onFocusIdentificationType($event)'
                            (inputFocused)='onFocusedIdentificationType($event)'
                            (selected)='selectIdentificationType($event)'
                            (inputCleared)='clearedIdentificationType($event)'
                            [(ngModel)]='employeSettingsSelected.type_document_identification'
                            [cssClass]="'form-control input-xm'" formControlName="type_document_identification">
                          </utils-autocomplete>

                          <ng-template #itemTemplatetype_identification let-tipo>
                            <a [innerHTML]="tipo.name"></a>
                          </ng-template>

                          <ng-template #notFoundTemplatetype_identification let-notFound>
                            <div [innerHTML]="'Sin Resultados'"></div>
                          </ng-template>
                        </label>

                      </div>
                    </div>
                    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4">
                      <label style="width: 100%">
                        Departamento: <span class="required">*</span>
                        <utils-autocomplete #autoDepartment [data]="this.settingsCompany_.department"
                          [itemTemplate]="itemTemplatedepartment" [searchKeyword]="keyword_department"
                          [notFoundTemplate]="notFoundTemplatedepartment" placeholder="Digite el departamento"
                          [debounceTime]="50" [isLoading]="false" (onFocusItem)='onFocusDepartment($event)'
                          (inputFocused)='onFocusedDepartment($event)' (selected)='selectDepartment($event)'
                          (inputCleared)='clearedDepartment($event)' [(ngModel)]='employeSettingsSelected.department'
                          formControlName="department">
                        </utils-autocomplete>

                        <ng-template #itemTemplatedepartment let-tipo>
                          <a [innerHTML]="tipo.name"></a>
                        </ng-template>

                        <ng-template #notFoundTemplatedepartment let-notFound>
                          <div [innerHTML]="'Sin Resultados'"></div>
                        </ng-template>

                      </label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4">
                      <label style="width: 100%">
                        Municipio: <span class="required">*</span>

                        <utils-autocomplete #autoMunicipality [data]="this.settingsCompany_.municipality"
                          [itemTemplate]="itemTemplatemunicipality" [searchKeyword]="keyword_municipality"
                          [notFoundTemplate]="notFoundTemplatemunicipality" placeholder="Digite la ciudad"
                          [debounceTime]="50" [isLoading]="false" (onFocusItem)='onFocusMunicipality($event)'
                          (inputFocused)='onFocusedMunicipality($event)' (selected)='selectMunicipality($event)'
                          (inputCleared)='clearedMunicipality($event)'
                          [(ngModel)]='employeSettingsSelected.municipality' formControlName="municipality">
                        </utils-autocomplete>

                        <ng-template #itemTemplatemunicipality let-tipo>
                          <a [innerHTML]="tipo.name"></a>
                        </ng-template>

                        <ng-template #notFoundTemplatemunicipality let-notFound>
                          <div [innerHTML]="'Sin Resultados'"></div>
                        </ng-template>

                      </label>
                    </div>
                    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4">
                      <label style="width: 100%">
                        Organizacion: <span class="required">*</span>
                        <utils-autocomplete #autoPerson [data]="this.settingsCompany_.type_organization"
                          [itemTemplate]="itemTemplatetype_person" [searchKeyword]="keyword_person"
                          [notFoundTemplate]="notFoundTemplatetype_person" placeholder="Digite el tipo de organizacion"
                          [debounceTime]="50" [isLoading]="false" (onFocusItem)='onFocusPersonType($event)'
                          (inputFocused)='onFocusedPersonType($event)' (selected)='selectPersonType($event)'
                          (inputCleared)='clearedPersonType($event)'
                          [(ngModel)]='employeSettingsSelected.type_organization' formControlName="type_organization">
                        </utils-autocomplete>

                        <ng-template #itemTemplatetype_person let-tipo>
                          <a [innerHTML]="tipo.name"></a>
                        </ng-template>

                        <ng-template #notFoundTemplatetype_person let-notFound>
                          <div [innerHTML]="'Sin Resultados'"></div>
                        </ng-template>
                      </label>
                    </div>
                    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4">
                      <label style="width: 100%">
                        Tipo de régimen: <span class="required">*</span>
                        <utils-autocomplete #autoRegimen [data]="this.settingsCompany_.type_regime"
                          [itemTemplate]="itemTemplatetype_regimen" [searchKeyword]="keyword_regimen"
                          [notFoundTemplate]="notFoundTemplatetype_regimen" placeholder="Digite el tipo de regimen"
                          [debounceTime]="50" [isLoading]="false" (onFocusItem)='onFocusRegimenType($event)'
                          (inputFocused)='onFocusedRegimenType($event)' (selected)='selectRegimenType($event)'
                          (inputCleared)='clearedRegimenType($event)' [(ngModel)]='employeSettingsSelected.type_regime'
                          formControlName="type_regime">
                        </utils-autocomplete>

                        <ng-template #itemTemplatetype_regimen let-tipo>
                          <a [innerHTML]="tipo.name"></a>
                        </ng-template>

                        <ng-template #notFoundTemplatetype_regimen let-notFound>
                          <div [innerHTML]="'Sin Resultados'"></div>
                        </ng-template>

                      </label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                      <label style="width: 100%">
                        Tipo de obligación: <span class="required">*</span>
                        <utils-autocomplete #autoObligation [data]="this.settingsCompany_.type_liability"
                          [itemTemplate]="itemTemplatetype_obligation" [searchKeyword]="keyword_obligation"
                          [notFoundTemplate]="notFoundTemplatetype_obligation"
                          placeholder="Digite el tipo de obligacion" [debounceTime]="50" [isLoading]="false"
                          (onFocusItem)='onFocusObligationType($event)' (inputFocused)='onFocusedObligationType($event)'
                          (selected)='selectObligationType($event)' (inputCleared)='clearedObligationType($event)'
                          [(ngModel)]='employeSettingsSelected.type_liability' formControlName="type_liability">
                        </utils-autocomplete>

                        <ng-template #itemTemplatetype_obligation let-tipo>
                          <a [innerHTML]="tipo.name"></a>
                        </ng-template>

                        <ng-template #notFoundTemplatetype_obligation let-notFound>
                          <div [innerHTML]="'Sin Resultados'"></div>
                        </ng-template>

                      </label>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
          <div class="col-md-12 text-center" style="padding: 1%;">
            <button type="submit" id="btnNext" class="bt bt-white">
              Siguiente
              <i class="fa fa-arrow-right"></i>
            </button>
          </div>
        </form>
      </div>
      <div class="row" *ngIf="Step===2">

        <div class="col-md-12">
          <div class="card box-card is-always-shadow">
            <div class="card-header">
              <div class="clearfix">
                <span>Datos de Certificado</span>
              </div>
            </div>
            <div class="card-body">
              <form autocomplete="off" role="form" [formGroup]='configCertifForm' (ngSubmit)="onConfigCertif()">
                <div class="form-body">
                  <div class="row">
                    <div class="col-md-7">
                      <div class="form-group">
                        <utils-dropzone [multiple]="false" accept=".p12" (change)="onSelect($event)">
                          <utils-dropzone-label>
                            Suelta tu archivo aquí o
                            <em>haz clic para cargar</em>
                          </utils-dropzone-label>
                          <utils-dropzone-preview *ngFor="let f of files" [removable]="true" (removed)="onRemove(f)">
                            <utils-dropzone-label>{{ f.name }} ({{ f.type }})</utils-dropzone-label>
                          </utils-dropzone-preview>
                        </utils-dropzone>
                      </div>

                    </div>
                    <div class="col-md-5">
                      <div class="form-group">
                        <label style="width: 100%">
                          Password: <span class="required">*</span>
                          <input type="text" class="form-control input-xm" [(ngModel)]="password_" name="email"
                            formControlName="password">
                        </label>
                      </div>

                      <div class="form-group">
                        <button type="submit" class="bt bt-blue w-100 mt-3">
                          <span>
                            Cargar Certificado
                          </span>
                        </button>
                      </div>
                    </div>

                    <div *ngIf="showbase64==true" class="col-12">
                      File:
                      <pre>{{base64}}</pre>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
        <div class="col-md-12 text-center" style="padding: 1%;">
          <button id="btnPrevion" class="bt bt-white mr-1" (click)="StepPrevious()">
            <i class="fa fa-arrow-left"></i>
            Anterior
          </button>
          <button id="btnNext" class="bt bt-white" (click)="StepNext()">
            Siguiente
            <i class="fa fa-arrow-right"></i>
          </button>
        </div>

      </div>
      <div class="row" *ngIf="Step===3">
        <div class="col-md-12">
          <div class="card box-card is-always-shadow">
            <div class="card-header">
              <div class="clearfix">
                <span>
                  Habilitación de Facturación Electrónica
                </span>
              </div>
            </div>
            <div class="card-body">
              <form autocomplete="off" role="form" [formGroup]='configSofwareFormFe'
                (ngSubmit)="onconfigSofwareFormFe()">
                <div class="row">
                  <div class="col-12 section_title title2">
                    1. Crear Software de Facturación Electrónica
                  </div>
                  <br>

                  <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                    <div class="form-group">
                      <label style="width: 100%">
                        Id Software: <span class="required">*</span>
                        <input type="text" [readonly]="isSaveSofwareFe" class="form-control input-xm"
                          [(ngModel)]="sofwareFeSettings_.id" name="feid" formControlName="feid">
                      </label>
                    </div>
                  </div>
                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Pin: <span class="required">*</span>
                        <input type="number" [readonly]="isSaveSofwareFe" class="form-control input-xm" name="pin"
                          formControlName="pin" [(ngModel)]="sofwareFeSettings_.pin">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <button type="submit" [disabled]="isSaveSofwareFe" class="bt bt-blue w-100 mt-3">
                        <span>
                          Crear Software
                        </span>
                      </button>
                    </div>
                  </div>
                  <br>

                </div>
              </form>
              <br>
              <form autocomplete="off" role="form" [formGroup]='resolutionFormFe' (ngSubmit)="onConfigResolutionFe()">
                <div class="row">
                  <div class="col-12 section_title title2">
                    2. Crear una numeración para la facturación electrónica
                  </div>
                  <br>
                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Prefix: <span class="required">*</span>
                        <input type="text" [readonly]="isSaveResolFe" class="form-control input-xm"
                          [(ngModel)]="resolutionFe.prefix" name="prefix" formControlName="prefix">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Rango desde: <span class="required">*</span>
                        <input type="number" [readonly]="isSaveResolFe" class="form-control input-xm"
                          [(ngModel)]="resolutionFe.from" name="from" formControlName="from">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Rango hasta: <span class="required">*</span>
                        <input type="number" [readonly]="isSaveResolFe" class="form-control input-xm"
                          [(ngModel)]="resolutionFe.to" name="to" formControlName="to">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Resolution: <span class="required">*</span>
                        <input type="text" [readonly]="isSaveResolFe" class="form-control input-xm"
                          [(ngModel)]="resolutionFe.resolution" name="resolution" formControlName="resolution">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Fecha Resolution: <span class="required">*</span>
                        <input type="date" [readonly]="isSaveResolFe" class="form-control input-xm"
                          [(ngModel)]="resolutionFe.resolution_date" name="resolution_date"
                          formControlName="resolution_date">
                      </label>
                    </div>
                  </div>
                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Fecha desde: <span class="required">*</span>
                        <input type="date" [readonly]="isSaveResolFe" class="form-control input-xm"
                          [(ngModel)]="resolutionFe.date_from" name="date_from" formControlName="date_from">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Fecha hasta: <span class="required">*</span>
                        <input type="date" [readonly]="isSaveResolFe" class="form-control input-xm"
                          [(ngModel)]="resolutionFe.date_to" name="date_to" formControlName="date_to">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <button type="submit" [disabled]="isSaveResolFe" class="bt bt-green w-100 mt-3">
                        <span>
                          Crear numeración
                        </span>
                      </button>
                    </div>
                  </div>
                  <br>

                </div>
              </form>
              <br>
              <form autocomplete="off" role="form" [formGroup]='configSofwareTestIdFormFe' (ngSubmit)="onHabilitarFe()">
                <div class="row">
                  <div class="col-12 section_title title2">
                    3. Coloque su Test Set ID
                  </div>
                  <br>
                  <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                    <div class="form-group">
                      <label style="width: 100%">
                        Test Set ID: <span class="required">*</span>
                        <input type="text" [readonly]="isSaveHabFe" class="form-control input-xm"
                          [(ngModel)]="sofwareFetestIdSettings_.testId" name="testId" formControlName="testId">
                      </label>
                    </div>
                  </div>
                  <div class="col-12 col-sm-2 col-md-2 col-lg-2 col-xl-2">
                    <div class="form-group">
                      <label style="width: 100%">
                        No Factura: <span class="required">*</span>
                        <input type="text" [readonly]="isSaveHabFe" class="form-control input-xm"
                          [(ngModel)]="sofwareFetestIdSettings_.fNumber" name="fNumber" formControlName="fNumber">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4">
                    <div class="form-group">
                      <button type="submit" [disabled]="isSaveHabFe" class="bt bt-red w-100 mt-3">
                        <span>
                          Habilitar Facturación Electrónica
                        </span>
                      </button>
                    </div>
                  </div>
                  <br>
                  <div class="col-12" *ngIf="QRStrFe !=''">
                    <br>
                    <div [innerHTML]="QRStrFe"></div>
                  </div>
                </div>
              </form>
              <br>
            </div>
          </div>
        </div>
        <div class="col-md-12 text-center" style="padding: 1%;">
          <button id="btnPrevion" class="bt bt-white mr-1" (click)="StepPrevious()">
            <i class="fa fa-arrow-left"></i>
            Anterior
          </button>
          <button id="btnNext" class="bt bt-white" (click)="StepNext()">
            Siguiente
            <i class="fa fa-arrow-right"></i>
          </button>
        </div>
      </div>

      <div class="row" *ngIf="Step===4">
        <div class="col-md-12">
          <div class="card box-card is-always-shadow">
            <div class="card-header">
              <div class="clearfix">
                <span>
                  Habilitación de Documentos equivalentes
                </span>
              </div>
            </div>
            <div class="card-body">
              <form autocomplete="off" role="form" [formGroup]='configSofwareFormEeqdocs'
                (ngSubmit)="onconfigSofwareFormEeqdocs()">
                <div class="row">
                  <div class="col-12 section_title title2">
                    1. Crear Software de Pos Electrónico
                  </div>
                  <br>

                  <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                    <div class="form-group">
                      <label style="width: 100%">
                        Id Software: <span class="required">*</span>
                        <input type="text" [readonly]="isSaveSofwareEeqdocs" class="form-control input-xm"
                          [(ngModel)]="sofwareEeqdocsSettings_.ideqdocs" name="ideqdocs" formControlName="ideqdocs">
                      </label>
                    </div>
                  </div>
                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Pin: <span class="required">*</span>
                        <input type="number" [readonly]="isSaveSofwareEeqdocs" class="form-control input-xm"
                          name="pineqdocs" formControlName="pineqdocs" [(ngModel)]="sofwareEeqdocsSettings_.pineqdocs">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <button type="submit" [disabled]="isSaveSofwareEeqdocs" class="bt bt-blue w-100 mt-3">
                        <span>
                          Crear Software
                        </span>
                      </button>
                    </div>
                  </div>
                  <br>

                </div>
              </form>
              <br>
              <form autocomplete="off" role="form" [formGroup]='resolutionFormEeqdocs'
                (ngSubmit)="onConfigResolutionEeqdocs()">
                <div class="row">
                  <div class="col-12 section_title title2">
                    2. Crear una numeración para Pos Electrónico
                  </div>
                  <br>
                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Prefix: <span class="required">*</span>
                        <input type="text" [readonly]="isSaveResolEeqdocs" class="form-control input-xm"
                          [(ngModel)]="resolutionEeqdocs.prefix" name="prefixEeqdocs" formControlName="prefixEeqdocs">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Rango desde: <span class="required">*</span>
                        <input type="number" [readonly]="isSaveResolEeqdocs" class="form-control input-xm"
                          [(ngModel)]="resolutionEeqdocs.from" name="fromEeqdocs" formControlName="fromEeqdocs">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Rango hasta: <span class="required">*</span>
                        <input type="number" [readonly]="isSaveResolEeqdocs" class="form-control input-xm"
                          [(ngModel)]="resolutionEeqdocs.to" name="toEeqdocs" formControlName="toEeqdocs">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Resolution: <span class="required">*</span>
                        <input type="text" [readonly]="isSaveResolEeqdocs" class="form-control input-xm"
                          [(ngModel)]="resolutionEeqdocs.resolution" name="resolutionEeqdocs"
                          formControlName="resolutionEeqdocs">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Fecha Resolution: <span class="required">*</span>
                        <input type="date" [readonly]="isSaveResolEeqdocs" class="form-control input-xm"
                          [(ngModel)]="resolutionEeqdocs.resolution_date" name="resolution_dateEeqdocs"
                          formControlName="resolution_dateEeqdocs">
                      </label>
                    </div>
                  </div>
                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Fecha desde: <span class="required">*</span>
                        <input type="date" [readonly]="isSaveResolEeqdocs" class="form-control input-xm"
                          [(ngModel)]="resolutionEeqdocs.date_from" name="date_fromEeqdocs"
                          formControlName="date_fromEeqdocs">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Fecha hasta: <span class="required">*</span>
                        <input type="date" [readonly]="isSaveResolEeqdocs" class="form-control input-xm"
                          [(ngModel)]="resolutionEeqdocs.date_to" name="date_toEeqdocs"
                          formControlName="date_toEeqdocs">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <button type="submit" [disabled]="isSaveResolEeqdocs" class="bt bt-green w-100 mt-3">
                        <span>
                          Crear numeración
                        </span>
                      </button>
                    </div>
                  </div>
                  <br>

                </div>
              </form>
              <br>
              <form autocomplete="off" role="form" [formGroup]='configSofwareTestIdFormEeqdocs'
                (ngSubmit)="onHabilitarEeqdocs()">
                <div class="row">
                  <div class="col-12 section_title title2">
                    3. Coloque su Test Set ID
                  </div>
                  <br>
                  <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                    <div class="form-group">
                      <label style="width: 100%">
                        Test Set ID: <span class="required">*</span>
                        <input type="text" [readonly]="isSaveHabEeqdocs" class="form-control input-xm"
                          [(ngModel)]="sofwareEeqdocstestIdSettings_.testIdeqdocs" name="testIdeqdocs"
                          formControlName="testIdeqdocs">
                      </label>
                    </div>
                  </div>
                  <div class="col-12 col-sm-2 col-md-2 col-lg-2 col-xl-2">
                    <div class="form-group">
                      <label style="width: 100%">
                        No Factura: <span class="required">*</span>
                        <input type="number" [readonly]="isSaveHabEeqdocs" class="form-control input-xm"
                          [(ngModel)]="sofwareEeqdocstestIdSettings_.fNumber" name="fNumber" formControlName="fNumber">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4">
                    <div class="form-group">
                      <button type="submit" [disabled]="isSaveHabEeqdocs" class="bt bt-red w-100 mt-3">
                        <span>
                          Habilitar Pos Electrónico
                        </span>
                      </button>
                    </div>
                  </div>
                  <br>
                  <div class="col-12" *ngIf="QRStrEeqdocs !=''">
                    <br>
                    <div [innerHTML]="QRStrEeqdocs"></div>
                  </div>
                </div>
              </form>
              <br>
            </div>
          </div>
        </div>
        <div class="col-md-12 text-center" style="padding: 1%;">
          <button id="btnPrevion" class="bt bt-white mr-1" (click)="StepPrevious()">
            <i class="fa fa-arrow-left"></i>
            Anterior
          </button>
          <button id="btnNext" class="bt bt-white" (click)="StepNext()">
            Siguiente
            <i class="fa fa-arrow-right"></i>
          </button>
        </div>
      </div>

      <div class="row" *ngIf="Step===5">
        <div class="col-md-12">
          <div class="card box-card is-always-shadow">
            <div class="card-header">
              <div class="clearfix">
                <span>
                  Habilitación de Facturación Electrónica
                </span>
              </div>
            </div>
            <div class="card-body">
              <form autocomplete="off" role="form" [formGroup]='configSofwareFormPayroll'
                (ngSubmit)="onconfigSofwareFormPayroll()">
                <div class="row">
                  <div class="col-12 section_title title2">
                    1. Crear Software de nómina Electrónica
                  </div>
                  <br>

                  <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                    <div class="form-group">
                      <label style="width: 100%">
                        Id Software: <span class="required">*</span>
                        <input type="text" [readonly]="isSaveSofwarePayroll" class="form-control input-xm"
                          [(ngModel)]="sofwarePayrollSettings_.idpayroll" name="idpayroll" formControlName="idpayroll">
                      </label>
                    </div>
                  </div>
                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Pin: <span class="required">*</span>
                        <input type="number" [readonly]="isSaveSofwarePayroll" class="form-control input-xm"
                          name="pinpayroll" formControlName="pinpayroll"
                          [(ngModel)]="sofwarePayrollSettings_.pinpayroll">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <button type="submit" [disabled]="isSaveSofwarePayroll" class="bt bt-blue w-100 mt-3">
                        <span>
                          Crear Software
                        </span>
                      </button>
                    </div>
                  </div>
                  <br>

                </div>
              </form>
              <br>
              <form autocomplete="off" role="form" [formGroup]='resolutionFormPayroll'
                (ngSubmit)="onConfigResolutionPayroll()">
                <div class="row">
                  <div class="col-12 section_title title2">
                    2. Crear una numeración para la nómina electrónica
                  </div>
                  <br>
                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Prefix: <span class="required">*</span>
                        <input type="text" [readonly]="isSaveResolPayroll" class="form-control input-xm"
                          [(ngModel)]="resolutionPayroll.prefix" name="prefixPayroll" formControlName="prefixPayroll">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Rango desde: <span class="required">*</span>
                        <input type="number" [readonly]="isSaveResolPayroll" class="form-control input-xm"
                          [(ngModel)]="resolutionPayroll.from" name="fromPayroll" formControlName="fromPayroll">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Rango hasta: <span class="required">*</span>
                        <input type="number" [readonly]="isSaveResolPayroll" class="form-control input-xm"
                          [(ngModel)]="resolutionPayroll.to" name="toPayroll" formControlName="toPayroll">
                      </label>
                    </div>
                  </div>
                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <button type="submit" [disabled]="isSaveResolPayroll" class="bt bt-green w-100 mt-3">
                        <span>
                          Crear numeración
                        </span>
                      </button>
                    </div>
                  </div>
                  <br>

                </div>
              </form>
              <br>
              <form autocomplete="off" role="form" [formGroup]='resolutionFormPayrollNote'
                (ngSubmit)="onConfigResolutionPayrollNote()">
                <div class="row">
                  <div class="col-12 section_title title2">
                    3. Crear una numeración para nómina Ajuste Electrónica
                  </div>
                  <br>
                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Prefix: <span class="required">*</span>
                        <input type="text" [readonly]="isSaveResolPayrollNote" class="form-control input-xm"
                          [(ngModel)]="resolutionPayrollNote.prefix" name="prefixPayrollNote"
                          formControlName="prefixPayrollNote">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Rango desde: <span class="required">*</span>
                        <input type="number" [readonly]="isSaveResolPayrollNote" class="form-control input-xm"
                          [(ngModel)]="resolutionPayrollNote.from" name="fromPayrollNote"
                          formControlName="fromPayrollNote">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <label style="width: 100%">
                        Rango hasta: <span class="required">*</span>
                        <input type="number" [readonly]="isSaveResolPayrollNote" class="form-control input-xm"
                          [(ngModel)]="resolutionPayrollNote.to" name="toPayrollNote" formControlName="toPayrollNote">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                    <div class="form-group">
                      <button type="submit" [disabled]="isSaveResolPayrollNote" class="bt bt-green w-100 mt-3">
                        <span>
                          Crear numeración
                        </span>
                      </button>
                    </div>
                  </div>
                  <br>

                </div>
              </form>
              <br>
              <form autocomplete="off" role="form" [formGroup]='configSofwareTestIdFormPayroll'
                (ngSubmit)="onHabilitarPayroll()">
                <div class="row">
                  <div class="col-12 section_title title2">
                    3. Coloque su Test Set ID
                  </div>
                  <br>
                  <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4">
                    <div class="form-group">
                      <label style="width: 100%">
                        Test Set ID: <span class="required">*</span>
                        <input type="text" [readonly]="isSaveHabPayroll" class="form-control input-xm"
                          [(ngModel)]="sofwarePayrolltestIdSettings_.testIdpayroll" name="testIdpayroll"
                          formControlName="testIdpayroll">
                      </label>
                    </div>
                  </div>
                  <div class="col-12 col-sm-2 col-md-2 col-lg-2 col-xl-2">
                    <div class="form-group">
                      <label style="width: 100%">
                        No Factura: <span class="required">*</span>
                        <input type="text" [readonly]="isSaveHabPayroll" class="form-control input-xm"
                          [(ngModel)]="sofwarePayrolltestIdSettings_.fNumber" name="fNumber" formControlName="fNumber">
                      </label>
                    </div>
                  </div>
                  <div class="col-12 col-sm-2 col-md-2 col-lg-2 col-xl-2">
                    <div class="form-group">
                      <label style="width: 100%">
                        # Doc: <span class="required">*</span>
                        <input type="text" [readonly]="isSaveHabPayroll" class="form-control input-xm"
                          [(ngModel)]="sofwarePayrolltestIdSettings_.limit" name="limit" formControlName="limit">
                      </label>
                    </div>
                  </div>

                  <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4">
                    <div class="form-group">
                      <button type="submit" [disabled]="isSaveHabPayroll" class="bt bt-red w-100 mt-3">
                        <span>
                          Habilitar nómina Electrónica
                        </span>
                      </button>
                    </div>
                  </div>
                  <br>
                  <div class="col-12" *ngIf="payrolls.length>0">
                    <div class="card">
                      <div id="wrapListTable" class="card-block overflowing_table tablesorterWrap">
                        <br>
                        <table class="table table-striped table-bordered" id="tableResult">
                          <thead>
                            <tr>
                              <th>Tipo</th>
                              <th>Prefijo</th>
                              <th>Número</th>
                              <th>CUNE</th>
                            </tr>
                          </thead>
                          <tbody id="tBody">
                            <!-- Mostrar las nóminas -->
                            <tr *ngFor="let payroll of payrolls">
                              <td>{{ payroll.type }}</td>
                              <td>{{ payroll.prefix }}</td>
                              <td>{{ payroll.number }}</td>
                              <td>{{ payroll.cufe }}</td>
                            </tr>
                            <!-- Mostrar las nóminas de ajuste -->
                            <tr *ngFor="let adjustment of payrollAdjustments">
                              <td>{{ adjustment.type }}</td>
                              <td>{{ adjustment.prefix }}</td>
                              <td>{{ adjustment.number }}</td>
                              <td>{{ adjustment.cufe }}</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
              <br>
            </div>
          </div>
        </div>
        <div class="col-md-12 text-center" style="padding: 1%;">
          <button id="btnPrevion" class="bt bt-white mr-1" (click)="StepPrevious()">
            <i class="fa fa-arrow-left"></i>
            Anterior
          </button>
          <button id="btnNext" class="bt bt-white" (click)="StepNext()">
            Siguiente
            <i class="fa fa-arrow-right"></i>
          </button>
        </div>
      </div>

      <div class="row" *ngIf="Step===6">
        <div class="col-12 section_title title2">
          <i class="fa fa-cog"></i> PASAR A PRODUCCIÓN
        </div>
        <br>
        <div class="col-12 col-sm-8 col-md-8 col-lg-8 col-xl-8">

          <!-- Factura Electrónica -->
          <div class="card-block overflowing_table">
            <label class="control control--checkbox">
              <input type="checkbox" [checked]="environmentSettings.type_environment_id === 1"
                (change)="onCheckboxChange('type_environment_id', $event)">
              <div class="control__indicator"></div>
            </label>
            <span class="per_des">
              Facturación Electrónica
            </span>
          </div>

          <!-- Documentos Equivalentes -->
          <div class="card-block overflowing_table">
            <label class="control control--checkbox">
              <input type="checkbox" [checked]="environmentSettings.eqdocs_type_environment_id === 1"
                (change)="onCheckboxChange('eqdocs_type_environment_id', $event)">
              <div class="control__indicator"></div>
            </label>
            <span class="per_des">
              Documentos Equivalentes
            </span>
          </div>

          <!-- Nómina Electrónica -->
          <div class="card-block overflowing_table">
            <label class="control control--checkbox">
              <input type="checkbox" [checked]="environmentSettings.payroll_type_environment_id === 1"
                (change)="onCheckboxChange('payroll_type_environment_id', $event)">
              <div class="control__indicator"></div>
            </label>
            <span class="per_des">
              Nómina Electrónica
            </span>
          </div>
        </div>
        <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4">
          <div class="form-group">
            <button type="button" class="bt bt-red w-100 mt-3" (click)="onProduction()">
              <span>
                Pasar a Producción
              </span>
            </button>
          </div>
        </div>
        <br>
        <br>
        <form autocomplete="off" role="form" [formGroup]='resolutionForm' (ngSubmit)="onConfigResolution()">
          <div class="col-md-12">
            <div class="card box-card is-always-shadow">
              <div class="card-header">
                <div class="clearfix">
                  <span>Crear Resolucion</span>
                </div>
              </div>
              <div class="card-body">

                <div class="form-body">
                  <div class="row">
                    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4">
                      <div class="form-group">
                        <label style="width: 100%">
                          Tipo documento: <span class="required">*</span>
                          <utils-autocomplete #autoDocumento [data]="this.type_document_"
                            [itemTemplate]="itemTemplatetype_document" [searchKeyword]="keyword_type_document"
                            [notFoundTemplate]="notFoundTemplatetype_document" placeholder="Digite el tipo documento"
                            [debounceTime]="50" [isLoading]="false" (onFocusItem)='onFocusTypeDocument($event)'
                            (inputFocused)='onFocusedTypeDocument($event)' (selected)='selectTypeDocument($event)'
                            (inputCleared)='clearedTypeDocument($event)' [(ngModel)]='resolutionSelected.type_document'
                            [cssClass]="'form-control input-xm'" formControlName="type_document">
                          </utils-autocomplete>

                          <ng-template #itemTemplatetype_document let-tipo>
                            <a [innerHTML]="tipo.name"></a>
                          </ng-template>

                          <ng-template #notFoundTemplatetype_document let-notFound>
                            <div [innerHTML]="'Sin Resultados'"></div>
                          </ng-template>
                        </label>
                      </div>
                    </div>
                    <div class="col-12 col-sm-2 col-md-2 col-lg-2 col-xl-2">
                      <div class="form-group">
                        <label style="width: 100%">
                          Prefix: <span class="required">*</span>
                          <input type="text" class="form-control input-xm" [(ngModel)]="resolutionSelected.prefix"
                            name="prefixS" formControlName="prefixS">
                        </label>
                      </div>
                    </div>
                    <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                      <div class="form-group">
                        <label style="width: 100%">
                          Rango desde: <span class="required">*</span>
                          <input type="number" class="form-control input-xm" [(ngModel)]="resolutionSelected.from"
                            name="fromS" formControlName="fromS">
                        </label>
                      </div>
                    </div>
                    <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                      <div class="form-group">
                        <label style="width: 100%">
                          Rango hasta: <span class="required">*</span>
                          <input type="number" class="form-control input-xm" [(ngModel)]="resolutionSelected.to"
                            name="toS" formControlName="toS">
                        </label>
                      </div>
                    </div>

                    <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                      <div class="form-group">
                        <label style="width: 100%">
                          Resolution: <span class="required">*</span>
                          <input type="text" class="form-control input-xm" [(ngModel)]="resolutionSelected.resolution"
                            name="resolutionS" formControlName="resolutionS">
                        </label>
                      </div>
                    </div>
                    <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                      <div class="form-group">
                        <label style="width: 100%">
                          Fecha Resolution: <span class="required">*</span>
                          <input type="date" class="form-control input-xm"
                            [(ngModel)]="resolutionSelected.resolution_date" name="resolution_dateS"
                            formControlName="resolution_dateS">
                        </label>
                      </div>
                    </div>

                    <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                      <div class="form-group">
                        <label style="width: 100%">
                          Fecha desde: <span class="required">*</span>
                          <input type="date" class="form-control input-xm" [(ngModel)]="resolutionSelected.date_from"
                            name="date_fromS" formControlName="date_fromS">
                        </label>
                      </div>
                    </div>
                    <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                      <div class="form-group">
                        <label style="width: 100%">
                          Fecha hasta: <span class="required">*</span>
                          <input type="date" class="form-control input-xm" [(ngModel)]="resolutionSelected.date_to"
                            name="date_toS" formControlName="date_toS">
                        </label>
                      </div>
                    </div>

                    <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                      <div class="form-group">
                        <label style="width: 100%">
                          Technical Key:
                          <input type="text" class="form-control input-xm"
                            [(ngModel)]="resolutionSelected.technical_key" name="technical_keyS"
                            formControlName="technical_keyS">
                        </label>
                      </div>
                    </div>

                    <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                      <div class="form-group">
                        <label style="width: 100%">
                          Generados hasta la fecha: <span class="required">*</span>
                          <input type="number" class="form-control input-xm"
                            [(ngModel)]="resolutionSelected.generated_to_date" name="generated_to_dateS"
                            formControlName="generated_to_dateS">
                        </label>
                      </div>
                    </div>

                    <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                      <div class="form-group">
                        <button type="submit" class="bt bt-blue w-100 mt-3">
                          <span>
                            Crear Resolución
                          </span>
                        </button>
                      </div>
                    </div>

                  </div>
                </div>

              </div>
            </div>
          </div>
        </form>

        <div class="col-md-12">
          <div class="card box-card is-always-shadow">
            <div class="card-header">
              <div class="clearfix">
                <span>Consultar Resoluciones DIAN</span>
              </div>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-12 col-sm-9 col-md-9 col-lg-9 col-xl-9">
                  <div class="form-group">
                    <label style="width: 100%">
                      Id Software: <span class="required">*</span>
                      <input type="text" class="form-control input-xm" [(ngModel)]="IDSoftware">
                    </label>
                  </div>
                </div>
                <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <div class="form-group">
                    <button type="button" class="bt bt-o-red w-100 mt-3" (click)="getNumberingRange()">
                      <span>
                        Consultar
                      </span>
                    </button>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="card">

                  <div id="wrapListTable" class="card-block overflowing_table tablesorterWrap">
                    <br>
                    <table class="table table-striped table-bordered">
                      <thead>
                        <tr>
                          <th>Resolution Number</th>
                          <th>Resolution Date</th>
                          <th>Prefix</th>
                          <th>From Number</th>
                          <th>To Number</th>
                          <th>Valid Date From</th>
                          <th>Valid Date To</th>
                          <th>Technical Key</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let item of numberRangeResponses">
                          <td>{{ item.ResolutionNumber }}</td>
                          <td>{{ item.ResolutionDate }}</td>
                          <td>{{ item.Prefix }}</td>
                          <td>{{ item.FromNumber }}</td>
                          <td>{{ item.ToNumber }}</td>
                          <td>{{ item.ValidDateFrom }}</td>
                          <td>{{ item.ValidDateTo }}</td>
                          <td>{{ item.TechnicalKey ? item.TechnicalKey : 'N/A' }}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>

        <div class="col-md-12 text-center" style="padding: 1%;">
          <button id="btnPrevion" class="bt bt-white mr-1" (click)="StepPrevious()">
            <i class="fa fa-arrow-left"></i>
            Anterior
          </button>
          <button id="btnNext" class="bt bt-white" (click)="StepFin()">
            <i class="fa fa-cog"></i>
            Finalizar
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
